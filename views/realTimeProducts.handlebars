<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Real Time Products</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <main>
    <h1>Productos en Tiempo Real</h1>

    <section id="create-section">
      <h2>Agregar producto</h2>
      <!-- Formulario usa fetch (HTTP) para persistir; router emitirá y socket actualizará clientes -->
      <form id="addProductForm">
        <input name="title" placeholder="Título" required />
        <input name="description" placeholder="Descripción" required />
        <input name="code" placeholder="Código" required />
        <input name="price" type="number" step="0.01" placeholder="Precio" required />
        <input name="stock" type="number" placeholder="Stock" required />
        <input name="category" placeholder="Categoría" required />
        <button type="submit">Agregar</button>
      </form>
    </section>

    <section id="products-section">
      <h2>Lista de productos</h2>

      {{#if products.length}}
        <ul id="products-list">
          {{#each products}}
            <li data-id="{{this.id}}">
              <strong>{{this.title}}</strong> — {{this.description}} — <em>Precio:</em> {{this.price}} — <small>ID: {{this.id}}</small>
              <button class="delete-btn" data-id="{{this.id}}">Eliminar</button>
            </li>
          {{/each}}
        </ul>
      {{else}}
        <p id="no-products">No hay productos todavía.</p>
      {{/if}}
    </section>
  </main>

  <!-- Socket.io client (se servirá automáticamente desde el servidor socket: /socket.io/socket.io.js) -->
  <script src="/socket.io/socket.io.js"></script>
  <script src="/js/realtime.js"></script>
</body>
</html>
